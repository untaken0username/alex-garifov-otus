!function(e){function t(t){for(var a,i,c=t[0],s=t[1],l=t[2],m=0,d=[];m<c.length;m++)i=c[m],r[i]&&d.push(r[i][0]),r[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={22:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/static/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;o.push([30,1,0,55]),n()}({"/kyj":function(e,t,n){"use strict";var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),i=n.n(o),c=["default","success","error","warning"],s=function(){function e(){var t=this;r()(this,e),this.fixPosition=function(){t.container.offsetTop+t.container.offsetHeight>window.innerHeight+document.documentElement.scrollTop?t.elem.style.position="fixed":t.elem.style.position="absolute"},this.close=function(){t.elem.style.opacity="0",setTimeout(function(){t.elem.parentNode===document.body&&t.container.removeChild(t.elem)},500),window.removeEventListener("scroll",t.fixPosition)}}return i()(e,[{key:"show",value:function(e){var t=e.type,n=e.text,a=e.timeout,r=e.className,o=e.container;-1===c.indexOf(t)&&(t="default"),this.container=o||document.body,this.elem=document.createElement("div"),this.elem.className="notification-lib notification-lib_".concat(t," ").concat(r),this.elem.innerHTML=n,this.closeElem=document.createElement("div"),this.closeElem.className="notification-lib__close ic ic-close-bold",this.elem.appendChild(this.closeElem),this.closeElem.addEventListener("click",this.close),window.addEventListener("scroll",this.fixPosition),this.container.appendChild(this.elem),this.fixPosition(),a&&setTimeout(this.close,a)}},{key:"success",value:function(e){this.show(Object.assign(e,{type:"success"}))}},{key:"error",value:function(e){this.show(Object.assign(e,{type:"error"}))}},{key:"warning",value:function(e){this.show(Object.assign(e,{type:"warning"}))}}],[{key:"create",value:function(){return new e}}]),e}();t.a={success:function(){var e;return(e=s.create()).success.apply(e,arguments)},error:function(){var e;return(e=s.create()).error.apply(e,arguments)},warning:function(){var e;return(e=s.create()).warning.apply(e,arguments)},show:function(){var e;return(e=s.create()).show.apply(e,arguments)}}},30:function(e,t,n){n("j36g"),e.exports=n("9G/J")},"3HKk":function(e,t,n){"use strict";t.a={CommonLabel:"Обычный",HWCommonLabel:"Обычное Д/З",ModuleCommonLabel:"Обычный модуль",CommonValue:"common",ProjectLabel:"Проектная работа",HWProjectLabel:"Проектная работа",ModuleProjectLabel:"Проектная работа",ProjectValue:"project"}},"7OIy":function(e,t,n){e.exports={xs:"360",xs375:"375",iphone:"414",ssm:"500",sm:"768",ssmMd:"767","ssm-sm":"600","sm-ct":"790",md:"1024","menu-slide":"1090","lg-ct":"1170",lg:"1280"}},"9G/J":function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"homework",function(){return ge});var r,o,i,c,s,l,u,m,d,h,p,f,v,g,w,_,b,y,k,E,x,C,N=n("LvDl"),j=n("i8i4"),O=n.n(j),P=n("q1tI"),S=n.n(P),T=n("55Ip"),M=n("Ty5D"),A=n("eIui"),I=n("Sj7Q"),L=(n("XmJA"),n("Z4rv")),R=n("o0o1"),z=n.n(R),D=n("yXPU"),W=n.n(D),U=n("yG8O"),K=n.n(U),F=n("lwsE"),H=n.n(F),J=n("W8MJ"),q=n.n(J),V=n("a1gu"),Y=n.n(V),G=n("Nsbk"),Q=n.n(G),B=n("PJYZ"),X=n.n(B),Z=n("7W2i"),$=n.n(Z),ee=n("U+yc"),te=n.n(ee),ne=(n("1ABj"),n("17x9")),ae=n.n(ne),re=n("2vnA"),oe=n("/kyj"),ie=n("3HKk"),ce=n("Pg+I"),se=n("YtzK"),le=n("lSNA"),ue=n.n(le),me=n("TSYQ"),de=n.n(me),he=n("l1BO"),pe=n("9mWb"),fe=Object(pe.a)({withRouter:!0})(r=function(e){function t(){var e;return H()(this,t),(e=Y()(this,Q()(t).call(this))).handleClick=function(t){var n=e.state.items;"true"!==t.currentTarget.getAttribute("data-available")&&t.preventDefault(),e.setState({items:Object(N.map)(n,function(e){return String(e.id)===t.currentTarget.getAttribute("data-id")&&(e.execution=e.execution||{},e.execution.unread=!1),e})})},e.state={loading:!1,items:[]},e}return $()(t,e),q()(t,[{key:"componentDidMount",value:function(){var e=W()(z.a.mark(function e(){var t,n,a,r;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.userCourseId,this.setState({loading:!0}),e.next=4,Object(he.b)("/learning/homeworks/".concat(t,"/"),"GET");case 4:n=e.sent,a=n.response,r=n.error,this.setState({loading:!1}),r||this.setState({items:a.data});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,a=t.items,r=this.props.homeworkId,o={new:"ic-fire",check_request:"ic-clock-black",check:"ic-clock-black",revoke:"ic-fire",accept:"ic-test-ok "};return S.a.createElement("div",{className:"student-homeworks"},n&&S.a.createElement("div",{className:"loader loader_md loader_absolute-center ic ic-loader"}),!n&&Object(N.map)(a,function(t,n){var a,i=t.execution||{};return t.in_future&&"new"===i.status||(a=o[i.status||(t.in_future?"":"new")]),S.a.createElement(T.c,{to:"/homework-chat/".concat(t.id,"/"),key:n,onClick:e.handleClick,"data-id":t.id,"data-available":t.available,className:de()({"student-homeworks__item":!0,"student-homeworks__item_active":String(t.id)===r,"student-homeworks__item_disabled":!t.available})},i.unread&&S.a.createElement("div",{className:"student-homeworks__unread-box"},S.a.createElement("div",{className:"student-homeworks__unread"})),S.a.createElement("div",{className:"student-homeworks__title"},n+1,". ",t.title),"accept"===i.status&&i.hasOwnProperty("points")&&S.a.createElement("div",{className:"student-homeworks__points"},i.points),a&&S.a.createElement("div",{className:"student-homeworks__ic-box"},S.a.createElement("div",{className:de()("ic","student-homeworks__ic",ue()({},a,!0))})))}))}}]),t}(S.a.Component))||r,ve=(n("dUwF"),Object(pe.a)({withRouter:!0})((v=f=function(e){function t(){var e;return H()(this,t),e=Y()(this,Q()(t).call(this)),K()(e,"chatLoading",c,X()(e)),K()(e,"chat",s,X()(e)),K()(e,"execution",l,X()(e)),K()(e,"homework",u,X()(e)),K()(e,"disabled",m,X()(e)),K()(e,"check",d,X()(e)),K()(e,"course",h,X()(e)),K()(e,"userCourse",p,X()(e)),e.fetcher=W()(z.a.mark(function t(){return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.fetcherTimeout&&clearTimeout(e.fetcherTimeout),t.next=3,e.updateChat();case 3:e.mount&&(e.fetcherTimeout=setTimeout(e.fetcher,1e4));case 4:case"end":return t.stop()}},t)})),e.handlePaymentMetrics=function(){var e=window.location.href.split("?");if(e.length>1){var t=e[0],n=e[1],a=new URLSearchParams("?"+n);a.has("from_payment")&&(a.delete("from_payment"),window.history.replaceState({},document.title,t+"?"+a.toString()),metrics.push({type:"ya",method:"reachGoal",goal:"payment-ok_homework"}),metrics.push({type:"ga",args:["send","event","Payment","homework"]}))}},e.updateChat=function(){var t=e.props.match.params.id;return e.fetcherPromise&&e.fetcherPromise.cancel(),e.fetcherPromise=Object(he.b)("/learning/homework/".concat(t,"/"),"GET").then(function(t){var n=t.response,a=t.error;Object(re.n)(function(){e.chatLoading=!1,e.fetcherPromise=null,a||(e.chat=n.data.messages||[],e.execution=n.data.execution||{},e.homework=n.data.homework||{},e.check=n.data.check||{},e.course=n.data.course||{},e.userCourse=n.data.user_course||{},e.availableCommands=n.data.available_commands||{},e.disabled=!1)})}),e.fetcherPromise},e.handleClose=function(){e.props.history.push("/")},e.handleSendMessage=function(){var t=W()(z.a.mark(function t(n,a,r){var o,i,c,s,l=arguments;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=l.length>3&&void 0!==l[3]&&l[3],i=e.props.match,c=i.params.id,e.disabled=!0,t.next=6,Object(he.b)("/learning/homework/".concat(c,"/"),"POST",{msg:n,editMsg:o});case 6:return s=t.sent,s.error&&oe.a.error({text:"При редактировании сообщения произошла ошибка",timeout:2e3}),t.next=11,e.updateChat();case 11:e.disabled=!1,a.value="",a.focus();case 14:case"end":return t.stop()}},t)}));return function(e,n,a){return t.apply(this,arguments)}}(),e.handleFileUpload=function(){var t=W()(z.a.mark(function t(n,a){var r,o,i;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,o=r.params.id,i=(i=a.value).trim(),e.disabled=!0,t.next=7,Object(he.b)("/learning/homework/".concat(o,"/"),"POST",{msg:i,media:n});case 7:return t.next=9,e.updateChat();case 9:e.disabled=!1,a.value="",a.focus();case 12:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),e.mount=!0,e.fetcherTimeout=null,e.fetcherPromise=null,e}return $()(t,e),q()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.id;e.match.params.id!==t&&(this.chatLoading=!0,this.fetcher())}},{key:"componentWillMount",value:function(){this.chatLoading=!0,this.fetcher(),this.handlePaymentMetrics()}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.fetcherTimeout&&clearTimeout(this.fetcherTimeout)}},{key:"render",value:function(){var e,t=this.extra.userCourseId,n=this.chatLoading,a=this.execution,r=this.homework,o=this.chat,i=this.disabled,c=this.check,s=this.course,l=this.userCourse,u=this.availableCommands,m=(a||{}).status,d=r||{},h=d.title,p=d.type,f=d.project_themes,v=this.props.match.params.id;return e=p===ie.a.CommonValue?h?"ДЗ: ".concat(h):"ДЗ":"Проектная работа",S.a.createElement(se.a,{bodyPreventOverflow:!0,className:{"learning-near__hw-modal":!0},onCloseClick:this.handleClose},S.a.createElement("div",{className:"learning-near__hw-app"},S.a.createElement("div",{className:"container container_full container_full-force container-overflow-auto"},S.a.createElement("div",{className:"container__row container__row_gutter-0"},S.a.createElement("div",{className:"container__col container__col_3 container__col_sm-0"},S.a.createElement(fe,{homeworkId:v,userCourseId:t})),S.a.createElement("div",{className:"container__col container__col_9 container__col_sm-12"},S.a.createElement("div",{className:"homework__modal-table"},!n&&S.a.createElement("div",{className:"homework__modal-content-header"},S.a.createElement("div",{className:de()({"homework__modal-info":!0,"homework__modal-info_green":-1!==["accept"].indexOf(m),"homework__modal-info_orange":-1!==["check_request"].indexOf(m),"homework__modal-info_blue":-1!==["check"].indexOf(m),"homework__modal-info_red":-1!==["revoke"].indexOf(m)})},S.a.createElement("h2",{className:"text text_default"},e),a&&a.project_theme&&S.a.createElement("h2",{className:"text text_default"},"Тема: ",a.project_theme," (",a.project_theme_status,")"))),S.a.createElement("div",{className:"homework__modal-content-row"},S.a.createElement("div",{className:"homework__modal-content-box"},S.a.createElement("div",{className:"homework__modal-content"},S.a.createElement("div",{className:"homework__modal-chat"},n&&S.a.createElement("div",{className:"loader loader_md loader_absolute-center ic ic-loader"}),!n&&S.a.createElement(ce.a,{disabled:i,onSendMessage:this.handleSendMessage,onFileUpload:this.handleFileUpload,chat:o,check:c,course:s,userCourse:l,project_themes:f,availableCommands:u})))))))))))}}]),t}(S.a.Component),f.contextTypes={userCourseId:ae.a.number},i=v,c=te()(i.prototype,"chatLoading",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),s=te()(i.prototype,"chat",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=te()(i.prototype,"execution",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=te()(i.prototype,"homework",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=te()(i.prototype,"disabled",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=te()(i.prototype,"check",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=te()(i.prototype,"course",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=te()(i.prototype,"userCourse",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),o=i))||o),ge=(g=function(e){function t(){var e,n;H()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=Y()(this,(e=Q()(t)).call.apply(e,[this].concat(r))),K()(n,"_groups",w,X()(n)),K()(n,"currentTeacherId",_,X()(n)),K()(n,"currentGroupId",b,X()(n)),K()(n,"assigneeId",y,X()(n)),K()(n,"users",k,X()(n)),K()(n,"homeworks",E,X()(n)),K()(n,"executions",x,X()(n)),K()(n,"_assignee",C,X()(n)),n}return $()(t,e),q()(t,[{key:"setExecutions",value:function(e){var t={};Object(N.forEach)(e,function(e){t[e.user_id]=t[e.user_id]||{},t[e.user_id][e.homework_id]=Object.assign({},e)}),this.executions=t,this.assigneeId=null}},{key:"groups",set:function(e){this._groups=e,this._groups.length>0&&null===this.currentGroupId&&(this.currentGroupId=this._groups[0].id)},get:function(){return this._groups}},{key:"assignee",set:function(e){this._assignee=[{value:null,title:"Все"}].concat(e.map(function(e){return{value:e.id,title:e.fullname}}))},get:function(){return this._assignee}}]),t}(n("pOpv").a),w=te()(g.prototype,"_groups",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=te()(g.prototype,"currentTeacherId",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=te()(g.prototype,"currentGroupId",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=te()(g.prototype,"assigneeId",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=te()(g.prototype,"users",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=te()(g.prototype,"homeworks",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=te()(g.prototype,"executions",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),C=te()(g.prototype,"_assignee",[re.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),te()(g.prototype,"groups",[re.f],Object.getOwnPropertyDescriptor(g.prototype,"groups"),g.prototype),te()(g.prototype,"assignee",[re.f],Object.getOwnPropertyDescriptor(g.prototype,"assignee"),g.prototype),g);n("7OIy");window.React.Apps=window.React.Apps||{},window.React.Apps.studentHomework=function(e){var t=new A.a({context:{userCourseId:parseInt(e.getAttribute("data-user-course-id"))},stores:a,plugins:L});O.a.render(function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],S.a.createElement(I.a,{app:e},S.a.createElement(T.b,null,S.a.createElement(M.c,null,S.a.createElement(M.a,{path:"/homework-chat/:id/",component:ve}))))}(t.componentContext),e)},window.React.StopApps=window.React.StopApps||{},Object(N.forEach)(window.React.Apps,function(e,t){var n,a=document.getElementById(t);a&&(e(a),window.React.StopApps[t]=(n=a,function(){O.a.unmountComponentAtNode(n)}))})},"9mWb":function(e,t,n){"use strict";var a=n("lwsE"),r=n.n(a),o=n("a1gu"),i=n.n(o),c=n("Nsbk"),s=n.n(c),l=n("7W2i"),u=n.n(l),m=n("MVZn"),d=n.n(m),h=n("LvDl"),p=n("17x9"),f=n.n(p),v=n("okNM"),g=n("Ty5D"),w=n("TKGn"),_=n.n(w),b=n("2mql"),y=n.n(b);n.d(t,"a",function(){return E});var k={isObserver:!0,styles:null,withRouter:!1};function E(e,t){var n;return"function"==typeof e?x(e,n=C(t)):(n=C(e),Object(h.partialRight)(x,n))}function x(e,t){var n=e;return n.contextTypes=d()({},e.contextTypes,{router:f.a.object,app:f.a.object}),n.prototype&&"function"==typeof n.prototype.render&&(Object(h.defaults)(n.prototype,{callAction:function(){var e;return(e=this.app).callAction.apply(e,arguments)}}),Object.defineProperties(n.prototype,{app:{get:function(){return this.context.app}},extra:{get:function(){return this.app.extra}},stores:{get:function(){return this.app.stores}},logger:{get:function(){return this.app.logger}}}),t.linkStore&&(n=function(e){function n(e,a){var o,c;r()(this,n);for(var l=arguments.length,u=new Array(l>2?l-2:0),m=2;m<l;m++)u[m-2]=arguments[m];return(c=i()(this,(o=s()(n)).call.apply(o,[this,e,a].concat(u)))).store=Object(h.get)(a.app.stores,t.linkStore),c}return u()(n,e),n}(n))),t.styles&&(n=function(e,t,n){var a=Object(h.defaults)(n,{allowMultiple:!0}),r=_()(e,t,a);return y()(r,e)}(n,t.styles)),t.isObserver&&(n=Object(v.a)(n)),t.withRouter&&(n=Object(g.e)(n)),n}function C(e){return Object(h.defaults)({},e,k)}},CVXg:function(e,t,n){e.exports={xs:"360",xs375:"375",iphone:"414",ssm:"500",sm:"768",ssmMd:"767","ssm-sm":"600","sm-ct":"790",md:"1024","menu-slide":"1090","lg-ct":"1170",lg:"1280"}},HRdk:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),l=n("Nsbk"),u=n.n(l),m=n("7W2i"),d=n.n(m),h=n("q1tI"),p=n.n(h),f=n("TSYQ"),v=n.n(f),g=(n("CVXg"),function(e){function t(){return r()(this,t),s()(this,u()(t).apply(this,arguments))}return d()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.progress,n=e.center,a=e.animated,r=e.showProgress;return t=(t=(t=t||0)<0?0:t)>100?100:t,p.a.createElement("div",{className:v()({"otus-progress":!0,"otus-progress_absolute-center":n})},p.a.createElement("div",{className:v()({"otus-progress__inner":!0,"otus-progress__inner_animated":a}),style:{width:"".concat(t,"%")}},p.a.createElement("div",{className:"otus-progress__label otus-progress__label_inner",style:{width:"".concat(100/t*100,"%")}},r&&"".concat(t,"%"))),r&&p.a.createElement("label",{className:"otus-progress__label"},t,"%"))}}]),t}(p.a.Component));g.defaultProps={showProgress:!0,animated:!1}},O6AP:function(e,t,n){},"Pg+I":function(e,t,n){"use strict";var a,r,o,i=n("o0o1"),c=n.n(i),s=n("yXPU"),l=n.n(s),u=n("lwsE"),m=n.n(u),d=n("W8MJ"),h=n.n(d),p=n("a1gu"),f=n.n(p),v=n("Nsbk"),g=n.n(v),w=n("7W2i"),_=n.n(w),b=n("q1tI"),y=n.n(b),k=n("17x9"),E=n.n(k),x=n("TSYQ"),C=n.n(x),N=n("wd/R"),j=n.n(N),O=n("igiR"),P=n("Ty5D"),S=n("LvDl"),T=n("mV8o"),M=n("QIFU"),A=n("jyKj"),I=function(e){function t(){return m()(this,t),f()(this,g()(t).apply(this,arguments))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.links,a=t;return(void 0===n||n)&&(a=Object(A.b)(a,{linkProcessor:function(e){return"/redirect/?to=".concat(encodeURIComponent(e))}})),a=Object(A.j)(a,"```",function(e){return'<code class="red code mono">'.concat(e.trim(),"</code>")}),y.a.createElement("div",{className:"homework-chat__item-text",dangerouslySetInnerHTML:{__html:a}})}}]),t}(y.a.Component),L=n("lSNA"),R=n.n(L),z=function(e){function t(){return m()(this,t),f()(this,g()(t).apply(this,arguments))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.media,t=Object(A.a)(e.attrs.size);return y.a.createElement("a",{href:e.media.link,target:"_blank",className:"homework-chat-media"},y.a.createElement("div",{className:C()(R()({"homework-chat-media__icon":!0,ic:!0},"ic-media-".concat(e.media.icon||"file"),!0))}),y.a.createElement("div",{className:"homework-chat-media__text"},y.a.createElement("div",{className:"homework-chat-media__title"},e.attrs.name),y.a.createElement("div",{className:"homework-chat-media__size"},t.value," ",t.suffix)))}}]),t}(y.a.Component),D=function(e){function t(){return m()(this,t),f()(this,g()(t).apply(this,arguments))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.url,t={};return e&&(t.backgroundImage="url(".concat(e,")")),y.a.createElement("div",{className:"homework-chat__item-avatar"},y.a.createElement("div",{className:"ic-owl-avatar homework-chat__item-avatar-img",style:t}))}}]),t}(y.a.Component),W=function(e){function t(){return m()(this,t),f()(this,g()(t).apply(this,arguments))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.change,a=t.actor,r=Object(A.f)(a.fname,a.lname),o="";switch(n.field){case"assignee_id":o="".concat(Object(A.c)("назначил",a.gender)," проверяющего");break;case"points":o="".concat(Object(A.c)("выставил",a.gender)," оценку ").concat(n.to);break;case"status":switch(n.to){case"new":o="".concat(Object(A.c)("перевел",a.gender)," ДЗ в статус «Новое»");break;case"accept":o="".concat(Object(A.c)("принял",a.gender)," ДЗ");break;case"revoke":o="".concat(Object(A.c)("вернул",a.gender)," ДЗ на доработку");break;case"check_request":case"check":o="".concat(Object(A.c)("взял",a.gender)," ДЗ на проверку")}break;case"project_theme_status":switch(n.to){case"accept":o="".concat(Object(A.c)("принял",a.gender)," тему работы");break;case"revoke":o="".concat(Object(A.c)("отклонил",a.gender)," тему работы")}break;default:o="изменил поле ".concat(n.field," с ").concat(n.from," на ").concat(n.to)}return o?y.a.createElement("div",{className:C()({"homework-chat__item":!0,"homework-chat__item_other":t.current_user.id!==t.actor.id})},y.a.createElement("div",{className:"homework-chat__item-content homework-chat__item-content_inline"},t.date_format," ",y.a.createElement("span",{className:"homework-chat__actor"},r)," ",o," ",y.a.createElement("br",null))):null}}]),t}(y.a.Component),U=n("l1BO"),K=n("YtzK"),F=n("pH2+"),H=function(e){function t(){var e,n;m()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=f()(this,(e=g()(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){var t=n.props.onCommandClick;"function"==typeof t&&t(e,n.props.command)},n}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.command,t=e.dsc,n=e.help_text;return y.a.createElement("div",{className:"homework-chat__command-button",onClick:this.handleClick},y.a.createElement("div",{className:"homework-chat__command-dsc"},t),y.a.createElement("div",{className:"homework-chat__command-help"},n))}}]),t}(y.a.Component),J=function(e){function t(){return m()(this,t),f()(this,g()(t).apply(this,arguments))}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.availableCommands,n=e.onCommandClick;return y.a.createElement("div",{className:"homework-chat__command-list"},Object(S.map)(t,function(e,t){return y.a.createElement(H,{command:e,key:t,onCommandClick:n})}))}}]),t}(y.a.Component);n("nw64");n.d(t,"a",function(){return q});var q=Object(P.e)((o=r=function(e){function t(){var e;return m()(this,t),(e=f()(this,g()(t).call(this))).handleUnread=function(){var t=e.props.onUnread;"function"==typeof t&&t.apply(void 0,arguments)},e.handleSend=function(){var t=l()(c.a.mark(function t(n){var a,r,o,i,s,l,u;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.onSendMessage,o=a.disabled,i=e.state,s=i.fileProgress,l=i.editing,u=(u=e.input.value).trim(),!o&&!1===s){t.next=6;break}return t.abrupt("return");case 6:if(""===u||"function"!=typeof r){t.next=9;break}return t.next=9,r(u,e.input,n,l&&l.id);case 9:e.setState({editing:null});case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.handleKeyDown=function(){var t=l()(c.a.mark(function t(n){var a,r,o,i,s,l,u,m;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("keydown"!==n.type){t.next=8;break}if(!n.metaKey&&!n.ctrlKey||"Enter"!==n.key){t.next=7;break}return n.preventDefault(),t.next=5,e.handleSend(n);case 5:t.next=8;break;case 7:if("Tab"===n.key){for(n.preventDefault(),a=n.target.selectionStart,r=n.target.selectionEnd,o=n.target.value,i=[],s=0,l=0;l<n.target.value.length;l+=1)a<=l&&l<=r&&-1===i.indexOf(s)&&i.push(s),"\n"===o[l]&&(s+=1);n.shiftKey?(u=0,0,n.target.value=Object(S.map)(n.target.value.split("\n"),function(e,t){var n=e;return-1!==i.indexOf(t)&&("\t"===e[0]?(n=e.substring(1),u+=1):"    "===e.substring(0,4)&&(n=e.substring(4),u+=4)),e.length,n}).join("\n"),a!==r?(n.target.selectionStart=a,n.target.selectionEnd=r-u):n.target.selectionStart=n.target.selectionEnd=a-u):a!==r?(0,m=0,n.target.value=Object(S.map)(n.target.value.split("\n"),function(e,t){var n=e;return-1!==i.indexOf(t)&&(n="\t".concat(n),m+=1),e.length,n}).join("\n"),n.target.selectionStart=a+1,n.target.selectionEnd=r+m):(n.target.value=n.target.value.substring(0,a)+"\t"+n.target.value.substring(r),n.target.selectionStart=n.target.selectionEnd=a+1)}case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.handleScroll=function(){e.sticky=Boolean(e.items.clientHeight===e.items.scrollHeight-e.items.scrollTop)},e.refItems=function(t){var n=e.sticky;e.items||(e.items=t),e.items&&n&&(e.items.scrollTop=e.items.scrollHeight)},e.handleChange=function(t){var n=e.props.onMessageChange;"function"==typeof n&&n(t)},e.handleEdit=function(t){var n=e.props.chat,a=+t.target.getAttribute("data-id"),r=n.find(function(e){return e.id===a});e.input.value=r.raw_msg;var o=document.createEvent("Event");o.initEvent("autosize:update",!0,!1),e.input.dispatchEvent(o),e.setState({editing:r})},e.handleCancelEdit=function(t){e.input.value="",e.setState({editing:null})},e.handleFileChoose=function(){var t=l()(c.a.mark(function t(n){var a,r,o,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.onFileUpload,e.ajaxPromise=Object(U.b)("/async/media.privateUpload","POST",{file0:n.target.files[0]},{onUploadProgress:function(t){var n=Math.round(t.loaded/t.total*100);e.setState({fileProgress:n})}},!0),n.target.value="",t.prev=3,e.setState({fileProgress:0}),t.next=7,e.ajaxPromise;case 7:r=t.sent,o=r.response,r.error,i=o.data[0],"function"==typeof a&&a(i,e.input);case 12:return t.prev=12,e.setState({fileProgress:!1}),t.finish(12);case 15:case"end":return t.stop()}},t,null,[[3,,12,15]])}));return function(e){return t.apply(this,arguments)}}(),e.handleCommandClick=function(){var t=l()(c.a.mark(function t(n,a){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),e.input.value=a.command+(a.autosubmit?"":" "),e.input.focus(),!a.autosubmit){t.next=6;break}return t.next=6,e.handleSend(n);case 6:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),e.input=null,e.ajaxPromise=null,e.state={sticky:!0,fileProgress:!1,editing:null},e.sticky=!0,e}return _()(t,e),h()(t,[{key:"componentDidUpdate",value:function(){this.refItems()}},{key:"render",value:function(){var e=this,t=this.props,n=t.chat,a=t.check,r=t.course,o=t.match,i=t.userCourse,c=t.project_themes,s=t.availableCommands,l=this.state.editing,u=a||{},m=u.group_finished,d=void 0!==m&&m,h=u.hw_check_enable,p=void 0!==h&&h,f=u.hw_check_price,v=u.shift_last_date,g=u.invoice_entity,w=(r||{}).title,_=this.state,b=_.fileProgress,k=_.payModal,E=[],x=this.props.disabled||!1!==b,N=o.params.id,P=i||{},L=P.check_enabled,R=(P.last_date,P.is_steps);if(c&&E.push(y.a.createElement(F.a,{title:"Темы для проекта",msg:c})),Array.isArray(n)){var U=null;n.slice().reverse().some(function(e){return!(!e.changes||!e.changes.some(function(e){return"status"===e.field}))&&(U=e.date,!0)}),Object(S.forEach)(n,function(t,n){if(t.el)E.push(y.a.createElement("div",{key:n},t.el));else{if(t.changes&&t.changes.length>0&&Object(S.forEach)(t.changes,function(e,a){E.push(y.a.createElement(W,{key:"".concat(n,"-").concat(a),item:t,change:e}))}),!(t.msg||t.media&&0!==t.media.length))return;E.push(function(t){var a=t.actor,r=!a,o=a?a.photo:null,i=a?Object(A.f)(a.fname,a.lname):"OTUS",c=t.current_user&&t.actor&&t.current_user.id!==t.actor.id,s=t.current_user&&t.actor&&t.current_user.id===t.actor.id;return y.a.createElement("div",{key:"".concat(n),className:C()({"homework-chat__item":!0,"homework-chat__item_other":c})},y.a.createElement("div",{className:"homework-chat__item-content"},y.a.createElement(D,{url:o}),y.a.createElement("div",{className:"homework-chat__item-content-box"},y.a.createElement("div",{className:"homework-chat__actor"},i,y.a.createElement("div",{className:"homework-chat__item-date"},t.date_format,t.edited&&" (ред.)")),r&&t.raw_msg&&y.a.createElement(I,{msg:t.raw_msg,links:!1}),!r&&t.msg&&y.a.createElement(I,{msg:t.msg}),t.media&&t.media.map(function(e,t){return y.a.createElement(z,{key:t,media:e})}),c&&t.was_readed&&y.a.createElement("div",{className:"homework-chat__item-bottom"},y.a.createElement("div",{className:"homework-chat__item-unread","data-id":t.id,onClick:e.handleUnread},"Пометить непрочитанным")),s&&(!U||t.date>=U)&&y.a.createElement("div",{className:"homework-chat__item-bottom"},y.a.createElement("div",{className:"homework-chat__item-unread","data-id":t.id,onClick:e.handleEdit},"Редактировать")))))}(t)),t.date_format}})}var H=p&&!L,q=d&&!H&&!L,V=d&&H,Y=!d||L;return y.a.createElement("div",{className:"homework-chat"},y.a.createElement("div",{className:"homework-chat__items",onScroll:this.handleScroll,ref:this.refItems},E.length>0&&E,0===E.length&&y.a.createElement("div",{className:"homework-chat__empty"},"Здесь будет выводиться история переписки")),y.a.createElement("div",{className:"homework-chat__commands"}),y.a.createElement("div",{className:"homework-chat__input"},q&&y.a.createElement("div",{className:"homework-chat__input-finish"},"Группа завершилась, ДЗ больше не принимаются"),V&&y.a.createElement("div",{className:"homework-chat__input-finish"},"Группа завершилась",f>0&&y.a.createElement(y.a.Fragment,null,", но вы можете продлить проверки",y.a.createElement("button",{className:"button button_red homework-chat__input-button",onClick:function(){e.setState({payModal:!0})}},"Проверить ДЗ"))),Y&&y.a.createElement(y.a.Fragment,null,l&&y.a.createElement("div",{className:"homework-chat-editing"},y.a.createElement("div",{className:"homework-chat-editing__space"}),y.a.createElement("div",{className:"homework-chat-editing__which"},y.a.createElement("p",{className:"homework-chat-editing__which-text",dangerouslySetInnerHTML:{__html:l.msg}})),y.a.createElement("div",{className:"homework-chat-editing__cancel",onClick:this.handleCancelEdit},y.a.createElement("button",{className:"homework-chat-editing__cancel-button ic ic-close-gray"}))),y.a.createElement("div",null,y.a.createElement("div",{className:"homework-chat__input-attach"},!1===b&&y.a.createElement("div",null,y.a.createElement("div",{className:"ic ic-attach homework-chat__input-attach-icon"}),y.a.createElement("input",{type:"file",className:"file-in-button js-avatar-file",accept:"*/*",onChange:this.handleFileChoose})),!1!==b&&y.a.createElement("div",{className:"homework-chat__input-attach-icon"},y.a.createElement(M.a,null))),y.a.createElement("div",{className:"homework-chat__input-input"},y.a.createElement(T.a,{disabled:x,maxRows:10,full:!0,style:{height:"47px"},inputRef:function(t){return e.input=t},placeholder:"Напишите сообщение",onChange:this.handleChange,onKeyDown:this.handleKeyDown})),y.a.createElement("div",{className:"homework-chat__input-send",onClick:this.handleSend},y.a.createElement("div",{className:"ic ic-send homework-chat__input-send-icon"}))),s.length>0&&y.a.createElement(J,{availableCommands:s,onCommandClick:this.handleCommandClick}))),k&&y.a.createElement(K.a,{className:{"homework-chat__modal":!0},onCloseClick:function(){e.setState({payModal:!1})}},y.a.createElement("form",{action:"/payments/invoice/".concat(g,"/"),method:"POST"},y.a.createElement("input",{hidden:!0,name:"user_course_id",defaultValue:i.id}),y.a.createElement("input",{hidden:!0,name:"hw_id",defaultValue:N}),y.a.createElement("input",{hidden:!0,name:"hw_date",defaultValue:v}),y.a.createElement("input",{hidden:!0,name:"csrfmiddlewaretoken",defaultValue:Object(O.a)()}),y.a.createElement("div",{className:"homework-chat__modal-title"},"Оплатите проверку ДЗ"),y.a.createElement("div",{className:"homework-chat__modal-text"},"Группа завершилась, но вы можете продлить проверки ДЗ ",R&&"текущей ступени"," за ",f," ₽"),y.a.createElement("div",{className:"homework-chat__modal-text"},"После оплаты проверки ДЗ по курсу «",w,"» будут доступны до ",j()(v,"YYYY-MM-DD").locale("ru").format("LL")),y.a.createElement("div",{className:"homework-chat__modal-button"},y.a.createElement("button",{type:"submit",className:"button button_md button_red"},"Оплатить ",f," ₽")))))}}]),t}(y.a.Component),r.propTypes={disabled:E.a.bool},r.defaultProps={disabled:!1,payModal:!1},a=o))||a},QIFU:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),l=n("Nsbk"),u=n.n(l),m=n("7W2i"),d=n.n(m),h=n("q1tI"),p=n.n(h),f=n("TSYQ"),v=n.n(f),g=n("HRdk"),w=(n("O6AP"),function(e){function t(){return r()(this,t),s()(this,u()(t).apply(this,arguments))}return d()(t,e),i()(t,[{key:"render",value:function(){var e,t=this.props,n=t.fullscreen,a=t.progress,r=t.inline,o=t.small,i=t.md,c=t.full,s=t.center,l=t.blockCenter;if(!1!==a)e=p.a.createElement(g.a,{progress:a,center:!0,showProgress:!1});else{var u=this.props.width,m={};u&&(m.width="".concat(u,"px"),m.height="".concat(u,"px")),e=p.a.createElement("div",{style:m,className:v()({"otus-loader":!0,"otus-loader_small":o,"otus-loader_md":i,"otus-loader_inline":r,"otus-loader_full":c,"otus-loader_absolute-center":s,"otus-loader_block-center":l})})}return n?p.a.createElement("div",{className:"otus-loader-fullscreen"},e):e}}]),t}(p.a.Component));w.defaultProps={progress:!1,small:!1,md:!1,full:!1,center:!1,blockCenter:!1}},Sj7Q:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),l=n("Nsbk"),u=n.n(l),m=n("7W2i"),d=n.n(m),h=n("q1tI"),p=n("17x9"),f=n.n(p),v=function(e){function t(){return r()(this,t),s()(this,u()(t).apply(this,arguments))}return d()(t,e),i()(t,[{key:"getChildContext",value:function(){return{app:this.props.app}}},{key:"render",value:function(){return this.props.children}}]),t}(h.Component);v.propTypes={app:f.a.object,children:f.a.node},v.childContextTypes={app:f.a.object}},XmJA:function(e,t,n){"use strict";var a=n("9oTK"),r=n.n(a);r.a.config({cancellation:!0,warnings:!1}),window.Promise=r.a;window.Promise},YtzK:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var a=n("MVZn"),r=n.n(a),o=n("lwsE"),i=n.n(o),c=n("W8MJ"),s=n.n(c),l=n("a1gu"),u=n.n(l),m=n("Nsbk"),d=n.n(m),h=n("7W2i"),p=n.n(h),f=n("q1tI"),v=n.n(f),g=n("17x9"),w=n.n(g),_=n("TSYQ"),b=n.n(_),y=(n("cKff"),function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=u()(this,(e=d()(t)).call.apply(e,[this].concat(r)))).handleKeyDown=function(e){var t=n.props.close;"Escape"===e.key&&t&&n.handleClose()},n.handleClose=function(){var e=n.props.onCloseClick;"function"==typeof e&&e()},n}return p()(t,e),s()(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.props.bodyPreventOverflow&&(document.body.style.top="".concat(-document.documentElement.scrollTop,"px"),document.body.classList.toggle("overflow-hidden-body",!0))}},{key:"componentWillUnmount",value:function(){if(document.removeEventListener("keydown",this.handleKeyDown),this.props.bodyPreventOverflow){var e=parseInt(document.body.style.top);document.body.classList.toggle("overflow-hidden-body",!1),document.documentElement.scrollTo(0,-e),document.body.scrollTo(0,-e)}}},{key:"render",value:function(){var e=this.props,t=e.close,n=e.children,a=e.closeExternal,o=e.slim,i=e.full,c=e.className,s=e.isNew,l=b()(r()({"otus-modal":!0,"otus-modal_slim":o,"otus-modal_full":i,"otus-modal_new":s},c));return v.a.createElement("div",{className:"otus-modal-container"},v.a.createElement("div",{className:"otus-modal-wrapper otus-modal-wrapper_dark"},v.a.createElement("div",{className:l},n,t&&!s&&!a&&v.a.createElement("div",{className:"otus-modal__close ic ic-close",onClick:this.handleClose}),t&&!s&&a&&v.a.createElement("div",{className:"otus-modal__close otus-modal__close_external ic ic-close-gray",onClick:this.handleClose}),t&&s&&v.a.createElement("div",{className:"otus-modal__close otus-modal__close_new",onClick:this.handleClose}))))}}]),t}(v.a.Component));y.propTypes={slim:w.a.bool,closeExternal:w.a.bool,onCloseClick:w.a.func,isNew:w.a.bool},y.defaultProps={close:!0,closeExternal:!1,slim:!1,isNew:!1,bodyPreventOverflow:!1}},Z4rv:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"component",function(){return E}),n.d(a,"store",function(){return x}),n.d(a,"action",function(){return C});var r,o=n("lwsE"),i=n.n(o),c=n("RIqP"),s=n.n(c),l=n("LvDl"),u=n.n(l);function m(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)}function d(){return/YaBrowser/.test(navigator.userAgent)||/Yowser/.test(navigator.userAgent)}function h(){return"WebkitAppearance"in document.documentElement.style}function p(){var e=navigator.userAgent.match(/OPR\/(\d+)\./);return!!e&&parseInt(e[1])>=15}function f(){return!(!window.console||!(window.console.firebug||window.console.exception&&window.console.table))||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1)>=31}function v(){var e=navigator.userAgent.match(/AppleWebKit\/(\d+)\.(\d+)(\.|\+|\s)/);return!!e&&parseInt(e[1])+parseInt(e[2])/100>=537.38}function g(){return m()||v()?"safari":/OPR/.test(navigator.userAgent)||/Opera/.test(navigator.vendor)||p()?"opera":!h()||m()||d()?/Firefox/.test(navigator.userAgent)||f()?"firefox":h()&&!m()&&d()?"yandex":null:"chrome"}function w(){return"yandex"===(e=g())||"chrome"===e||"firefox"===e&&f()||"opera"===e&&p()||"safari"===e&&v();var e}var _=["debug","info","warn","error","log"],b=function(e){return e.prototype.logMethod=u.a.noop,e;return e.prototype.logMethod=w()?y:k,e}(r=function e(t){var n=this,a=t.prefix,r=void 0===a?"":a,o=t.prefixStyle,c=void 0===o?"color:inherit":o,s=t.logMethods,l=void 0===s?_:s;if(i()(this,e),!Array.isArray(l))throw new TypeError('"logMethods" must be of type "Array" in ClientClientLogger for prefix: '.concat(r));this.prefix=r,this.prefixStyle=c;var m=u.a.transform(l,function(e,t){e[t]=n.logMethod.bind(n,t)},{});u.a.assign(this,m)})||r;function y(e,t){for(var n,a=arguments.length,r=new Array(a>2?a-2:0),o=2;o<a;o++)r[o-2]=arguments[o];var i=this.prefix,c=this.prefixStyle;if("string"==typeof e){var l=["%c".concat(i," %c").concat(t),c,"color:inherit"];r=r.length?[].concat(l,s()(r)):l}else r=["%c".concat(i)].concat(s()(r));(n=console)[e].apply(n,s()(r))}function k(e,t){for(var n,a,r=this.prefix,o=arguments.length,i=new Array(o>2?o-2:0),c=2;c<o;c++)i[c-2]=arguments[c];a="string"==typeof e?["".concat(r," ").concat(t)].concat(i):[r,t].concat(i),(n=console)[e].apply(n,s()(a))}function E(e){e.logger=new b({prefix:"Component",prefixStyle:"color:orange"})}function x(e){e.logger=new b({prefix:"Store",prefixStyle:"color:brown"})}function C(e){e.logger=new b({prefix:"Action",prefixStyle:"color:green"})}n.d(t,"logger",function(){return a})},cKff:function(e,t,n){e.exports={xs:"360",xs375:"375",iphone:"414",ssm:"500",sm:"768",ssmMd:"767","ssm-sm":"600","sm-ct":"790",md:"1024","menu-slide":"1090","lg-ct":"1170",lg:"1280"}},dUwF:function(e,t,n){e.exports={xs:"360",xs375:"375",iphone:"414",ssm:"500",sm:"768",ssmMd:"767","ssm-sm":"600","sm-ct":"790",md:"1024","menu-slide":"1090","lg-ct":"1170",lg:"1280"}},eIui:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("RIqP"),r=n.n(a),o=n("lwsE"),i=n.n(o),c=n("W8MJ"),s=n.n(c),l=n("LvDl"),u=function(){function e(t){var n=this;i()(this,e),this.applyContextTypePlugins=function(e){Object(l.forEach)(e,n.applyPluginForContextType)},this.applyPluginForContextType=function(e,t){if(!n.isContextTypeAllowed(t))throw new Error('Unrecognized context type "'.concat(t,'". Must be one of: "').concat(n.constructor.allowedContextTypes,'"'));var a=n["".concat(t,"Context")];n.applyPlugin(e,a)},this.createContexts(t.context),this.stores=this.createStores(t.stores),this.actions=t.actions,this.applyPlugins(t.plugins)}return s()(e,[{key:"serialize",value:function(){var e=this;return Object(l.transform)(this.stores,function(t,n,a){var r=e.serializeStore(n);r&&(t[a]=r)})}},{key:"deserialize",value:function(e){var t=this;Object(l.forEach)(e,function(e,n){var a=t.stores[n];a&&(a.deserialize?a.deserialize(e):Object(l.assign)(a,e))})}},{key:"callAction",value:function(e,t){if(!Object(l.has)(this.actions,e))throw new Error("Can't execute action \"".concat(e,"\": it's not registered"));return this.logAction(e,t),Object(l.get)(this.actions,e).call(this.actionContext,t)}},{key:"logAction",value:function(e,t){var n,a=t?["with data:",t]:["without data"];(n=this.actionContext.logger).info.apply(n,r()(["Calling action %c".concat(e),"color:green"].concat(a)))}},{key:"applyPlugins",value:function(e){Object(l.forEach)(e,this.applyContextTypePlugins)}},{key:"isContextTypeAllowed",value:function(e){return Object(l.includes)(this.constructor.allowedContextTypes,e)}},{key:"createStores",value:function(e){var t=this;return Object(l.mapValues)(e,function(e){return new e(t.storeContext)})}},{key:"createContexts",value:function(e){var t=this.callAction.bind(this),n=this;e=e||{},this.componentContext={callAction:t,get extra(){return e},get stores(){return n.stores}},this.actionContext={callAction:t,get stores(){return n.stores}},this.storeContext={get stores(){return n.stores}}}},{key:"applyPlugin",value:function(e,t){return e(t)}},{key:"serializeStore",value:function(e){var t=e.constructor.serializeKeys,n={};return t&&(n=Object(l.pick)(e,t)),e.serialize&&(n=e.serialize(n)),n}}]),e}();u.allowedContextTypes=["action","store","component","trackPage","trackEvent"]},igiR:function(e,t,n){"use strict";function a(){var e=document.getElementById("meta-csrf");return e?e.getAttribute("content"):""}n.d(t,"a",function(){return a})},jyKj:function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"h",function(){return c}),n.d(t,"i",function(){return s}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"j",function(){return m}),n.d(t,"a",function(){return d}),n.d(t,"g",function(){return h}),n.d(t,"d",function(){return p}),n.d(t,"f",function(){return f});var a=n("LvDl"),r=n("wd/R"),o=n.n(r);function i(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function c(e,t,n,a){var r=e%10,o=e%100;return 1===r&&11!==o?t:r>=2&&r<=4&&(o<10||o>=20)?n:a}function s(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function l(e,t){return null===t?e="".concat(e,"(а)"):"f"===t&&(e="".concat(e,"а")),e}function u(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).linkProcessor;return(e||"").replace(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+)[^(.(\s|$))])/gi,function(e,n,a){var r=a;return r.match("^https?://")||(r="http://".concat(r)),"function"==typeof t&&(r=t(r)),n+'<a target="_blank" rel="nofollow noopener nofollow" href="'.concat(r,'">').concat(a,"</a>")})}function m(e,t,n){var a="(".concat(t,")((.|[\n\r])+?)(").concat(t,")");return e.replace(new RegExp(a,"mgi"),function(e,t,a){return n(a)})}function d(e){var t=c(e,"байт","байта","байтов");return Object(a.forEach)(["КБ","МБ","ГБ"],function(n){e>1024&&(e/=1024,t=n)}),{value:e=e<10?Math.round(10*e)/10:Math.round(e),suffix:t}}function h(e,t){return null==e?"":(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+(t||void 0===t?"<br />":"<br>")+"$2")}function p(e,t,n){return[e,t].map(function(e){return!e||e instanceof o.a||(e=e instanceof Date?o()(e):void 0),e}),t&&e&&0!==t.diff(e,"days")?"".concat(e.format(n)," - ").concat(t.format(n)):t||e?"".concat((e||t).format(n)):void 0}function f(e,t){var n="";return e&&(n+=e.trim()),t&&(n&&(n+=" "),n+=t.trim()),n}},l1BO:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return m});var a=n("MVZn"),r=n.n(a),o=n("LvDl"),i=n("vDqi"),c=n.n(i),s=n("igiR"),l=c.a.CancelToken;function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.toLowerCase(),o=l.source();return n.cancelToken=o.token,new window.Promise(function(t,i,s){c()(r()({method:a,url:e},n)).then(function(e){200!==e.status?i(e):t(e.data||e)},function(e){return i(e)}),s(function(){o.cancel()})})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(a.headers||(a.headers={}),r){if(!(n instanceof FormData)){var i=new FormData;Object(o.forEach)(n,function(e,t){void 0!==e&&i.append(t,e)}),n=i}Object.assign(a.headers,{"Content-Type":"multipart/form-data"})}document.getElementById("meta-csrf");return Object.assign(a.headers,{"X-CSRFToken":Object(s.a)(),"X-Requested-With":"XMLHttpRequest"}),"GET"===t&&(a.params=n),null!==a.data&&void 0!==a.data||"GET"===t||(a.data=n),u(e,t,a).then(function(e){return{response:e}}).catch(function(e){return{error:e}})}},mV8o:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var a=n("pVnL"),r=n.n(a),o=n("lSNA"),i=n.n(o),c=n("QILm"),s=n.n(c),l=n("lwsE"),u=n.n(l),m=n("W8MJ"),d=n.n(m),h=n("a1gu"),p=n.n(h),f=n("Nsbk"),v=n.n(f),g=n("7W2i"),w=n.n(g),_=n("q1tI"),b=n.n(_),y=n("TSYQ"),k=n.n(y),E=n("O6Fj"),x=n.n(E),C=function(e){function t(){var e,n;u()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=p()(this,(e=v()(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=n.props.onChange;"function"==typeof t&&t(e.target.value)},n}return w()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.full,n=e.inputRef,a=e.editor,o=e.customClassname,c=s()(e,["full","inputRef","editor","customClassname"]);return n=n||function(){},b.a.createElement(x.a,r()({innerRef:n,className:k()(i()({input:!0,input_full:t,"js-editor":a},o,!0)),onChange:this.handleChange},c))}}]),t}(b.a.Component);C.defaultProps={disabled:!1}},nw64:function(e,t,n){e.exports={xs:"360",xs375:"375",iphone:"414",ssm:"500",sm:"768",ssmMd:"767","ssm-sm":"600","sm-ct":"790",md:"1024","menu-slide":"1090","lg-ct":"1170",lg:"1280"}},"pH2+":function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),i=n.n(o),c=n("a1gu"),s=n.n(c),l=n("Nsbk"),u=n.n(l),m=n("7W2i"),d=n.n(m),h=n("q1tI"),p=n.n(h),f=n("jyKj"),v=function(e){function t(){return r()(this,t),s()(this,u()(t).apply(this,arguments))}return d()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.title;return p.a.createElement("div",{className:"for-teacher-message"},p.a.createElement("b",{className:"text text_small"},n||"Примечание для преподавателя"),p.a.createElement("div",{className:"text text_small",dangerouslySetInnerHTML:{__html:Object(f.g)(Object(f.b)(t))}}))}}]),t}(p.a.Component)},pOpv:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("lwsE"),r=n.n(a),o=n("W8MJ"),i=n.n(o),c=function(){function e(t){r()(this,e),this.app=t,this.init&&this.init()}return i()(e,[{key:"reset",value:function(){this.init&&this.init()}},{key:"stores",get:function(){return this.app.stores}},{key:"logger",get:function(){return this.app.logger}},{key:"trackPage",get:function(){return this.app.trackPage}},{key:"trackEvent",get:function(){return this.app.trackEvent}}]),e}()}});